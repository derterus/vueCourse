import{_ as h,b as u,c as o,d as t,t as r,F as g,r as P,o as i,p as b,e as _}from"./index-BYyPEl2N.js";const p={data(){return{title:"Доктора",doctors:[],currentPage:1,itemsPerPage:10}},computed:{pageCount(){return Math.ceil(this.doctors.length/this.itemsPerPage)},paginatedData(){const s=(this.currentPage-1)*this.itemsPerPage,n=s+this.itemsPerPage;return this.doctors.slice(s,n)}},methods:{getDoctors(){u.get("http://localhost:3000/doctors").then(s=>{this.doctors=s.data}).catch(s=>{console.error(s)})},createDoctor(){this.$router.push("/doctors/create")},editDoctor(s){this.$router.push("/doctors/edit/"+s)},viewDoctor(s){this.$router.push("/doctors/show/"+s)},async deleteDoctor(s){try{await u.delete("http://localhost:3000/doctors/"+s),alert("Успешно удален!"),this.getDoctors()}catch(n){console.error(n),alert("Произошла ошибка при удалении врача.")}},nextPage(){this.currentPage<this.pageCount&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}},created(){this.getDoctors()}},m=s=>(b("data-v-120a46ee"),s=s(),_(),s),C={class:"doctors-index"},D={class:"pagination"},k=["disabled"],v=["disabled"],x=m(()=>t("thead",null,[t("tr",null,[t("th",null,"№"),t("th",null,"Имя"),t("th",null,"Фамилия"),t("th",null,"Специализация"),t("th",null,"Номер телефона"),t("th",null,"Электронная почта"),t("th",null,"Опыт работы (лет)"),t("th",null,"Рабочий график"),t("th",null,"Адрес"),t("th",null,"Фото"),t("th",null,"Действия")])],-1)),f=["src"],w=["onClick"],S=["onClick"],y=["onClick"],I={class:"pagination"},N=["disabled"],B=["disabled"];function E(s,n,F,L,a,l){return i(),o("div",C,[t("h1",null,r(a.title),1),t("p",null,"Страница "+r(a.currentPage)+" из "+r(l.pageCount),1),t("p",null,[t("button",{onClick:n[0]||(n[0]=(...e)=>l.createDoctor&&l.createDoctor(...e)),class:"btn btn-success"},"Создание доктора")]),t("div",D,[t("button",{onClick:n[1]||(n[1]=(...e)=>l.prevPage&&l.prevPage(...e)),disabled:a.currentPage===1,class:"btn"},"Предыдущая",8,k),t("button",{onClick:n[2]||(n[2]=(...e)=>l.nextPage&&l.nextPage(...e)),disabled:a.currentPage===l.pageCount,class:"btn"},"Следующая",8,v)]),t("table",null,[x,t("tbody",null,[(i(!0),o(g,null,P(l.paginatedData,(e,d)=>(i(),o("tr",{key:e.id},[t("td",null,r(d+1),1),t("td",null,r(e.FirstName),1),t("td",null,r(e.LastName),1),t("td",null,r(e.Specialization),1),t("td",null,r(e.PhoneNumber),1),t("td",null,r(e.Email),1),t("td",null,r(e.ExperienceYears),1),t("td",null,r(e.WorkSchedule),1),t("td",null,r(e.Adress),1),t("td",null,[t("img",{src:e.Photo,width:"150px"},null,8,f)]),t("td",null,[t("button",{onClick:c=>l.viewDoctor(e.id)},"Просмотреть",8,w),t("button",{onClick:c=>l.editDoctor(e.id)},"Редактировать",8,S),t("button",{onClick:c=>l.deleteDoctor(e.id)},"Удалить",8,y)])]))),128))])]),t("div",I,[t("button",{onClick:n[3]||(n[3]=(...e)=>l.prevPage&&l.prevPage(...e)),disabled:a.currentPage===1,class:"btn"},"Предыдущая",8,N),t("button",{onClick:n[4]||(n[4]=(...e)=>l.nextPage&&l.nextPage(...e)),disabled:a.currentPage===l.pageCount,class:"btn"},"Следующая",8,B)])])}const z=h(p,[["render",E],["__scopeId","data-v-120a46ee"]]);export{z as default};
