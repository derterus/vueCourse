import{_ as p,b as r,c as m,d as i,w as l,v as a,f as u,o as d}from"./index-BYyPEl2N.js";const h={data(){return{id:this.$route.params.id,patient:{FirstName:"",LastName:"",DateOfBirth:"",Gender:"",PhoneNumber:"",Email:"",Diagnosis:"",Adress:"",Photo:null}}},async created(){try{const o=await r.get("http://localhost:3000/patient/"+this.id);if(o.data.length>0){const t=o.data[0];t.DateOfBirth=new Date(t.DateOfBirth).toISOString().split("T")[0],this.patient=t}}catch(o){console.error(o)}},methods:{onFileChange(o){this.patient.Photo=o.target.files[0]},async submitForm(){const o=new FormData;Object.keys(this.patient).forEach(t=>{t!=="Photo"?o.append(t,this.patient[t]):typeof this.patient.Photo!="string"&&o.append("Photo",this.patient.Photo)});try{await r.put("http://localhost:3000/patient/"+this.id,o),alert("Пациент успешно обновлен!")}catch(t){console.error(t),alert("Произошла ошибка при обновлении пациента.")}}}},f={class:"doctors-create"},g=i("h1",null,"Редактирование пациента",-1),b=i("button",{type:"submit",class:"btn btn-success"},"Сохранить",-1);function D(o,t,x,F,n,s){return d(),m("div",f,[g,i("form",{onSubmit:t[9]||(t[9]=u((...e)=>s.submitForm&&s.submitForm(...e),["prevent"]))},[l(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.patient.FirstName=e),placeholder:"Имя",maxlength:"255"},null,512),[[a,n.patient.FirstName]]),l(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.patient.LastName=e),placeholder:"Фамилия",maxlength:"255"},null,512),[[a,n.patient.LastName]]),l(i("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.patient.DateOfBirth=e),placeholder:"Дата рождения",type:"date"},null,512),[[a,n.patient.DateOfBirth]]),l(i("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.patient.Gender=e),placeholder:"Пол",maxlength:"255"},null,512),[[a,n.patient.Gender]]),l(i("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.patient.PhoneNumber=e),placeholder:"Номер телефона",maxlength:"255"},null,512),[[a,n.patient.PhoneNumber]]),l(i("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.patient.Email=e),placeholder:"Email",type:"email"},null,512),[[a,n.patient.Email]]),l(i("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.patient.Diagnosis=e),placeholder:"Диагноз",maxlength:"255"},null,512),[[a,n.patient.Diagnosis]]),l(i("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.patient.Adress=e),placeholder:"Адрес",maxlength:"255"},null,512),[[a,n.patient.Adress]]),i("input",{type:"file",onChange:t[8]||(t[8]=(...e)=>s.onFileChange&&s.onFileChange(...e))},null,32),b],32)])}const P=p(h,[["render",D]]);export{P as default};
