import{_ as h,b as c,c as i,d as t,t as a,F as g,r as P,o as d,p as b,e as _}from"./index-BYyPEl2N.js";const p={data(){return{title:"Пациенты",patients:[],currentPage:1,itemsPerPage:10}},computed:{pageCount(){return Math.ceil(this.patients.length/this.itemsPerPage)},paginatedData(){const n=(this.currentPage-1)*this.itemsPerPage,s=n+this.itemsPerPage;return this.patients.slice(n,s)}},methods:{getPatients(){c.get("http://localhost:3000/patient").then(n=>{this.patients=n.data}).catch(n=>{console.error(n)})},createPatient(){this.$router.push("/patient/create")},editPatient(n){this.$router.push("/patient/edit/"+n)},viewPatient(n){this.$router.push("/patient/show/"+n)},async deletePatient(n){try{await c.delete("http://localhost:3000/patient/"+n),alert("Успешно удален!"),this.getPatients()}catch(s){console.error(s),alert("Произошла ошибка при удалении пациента.")}},nextPage(){this.currentPage<this.pageCount&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}},created(){this.getPatients()}},m=n=>(b("data-v-dbd2e873"),n=n(),_(),n),C={class:"patients-index"},v={class:"pagination"},k=["disabled"],x=["disabled"],f=m(()=>t("thead",null,[t("tr",null,[t("th",null,"№"),t("th",null,"Имя"),t("th",null,"Фамилия"),t("th",null,"Дата рождения"),t("th",null,"Пол"),t("th",null,"Номер телефона"),t("th",null,"Электронная почта"),t("th",null,"Диагноз"),t("th",null,"Адрес"),t("th",null,"Фото"),t("th",null,"Действия")])],-1)),w=["src"],D=["onClick"],S=["onClick"],y=["onClick"],I={class:"pagination"},B=["disabled"],N=["disabled"];function F(n,s,E,L,r,l){return d(),i("div",C,[t("h1",null,a(r.title),1),t("p",null,"Страница "+a(r.currentPage)+" из "+a(l.pageCount),1),t("p",null,[t("button",{onClick:s[0]||(s[0]=(...e)=>l.createPatient&&l.createPatient(...e)),class:"btn btn-success"},"Создание пациента")]),t("div",v,[t("button",{onClick:s[1]||(s[1]=(...e)=>l.prevPage&&l.prevPage(...e)),disabled:r.currentPage===1,class:"btn"},"Предыдущая",8,k),t("button",{onClick:s[2]||(s[2]=(...e)=>l.nextPage&&l.nextPage(...e)),disabled:r.currentPage===l.pageCount,class:"btn"},"Следующая",8,x)]),t("table",null,[f,t("tbody",null,[(d(!0),i(g,null,P(l.paginatedData,(e,o)=>(d(),i("tr",{key:e.id},[t("td",null,a(o+1),1),t("td",null,a(e.FirstName),1),t("td",null,a(e.LastName),1),t("td",null,a(new Date(e.DateOfBirth).toISOString().split("T")[0]),1),t("td",null,a(e.Gender),1),t("td",null,a(e.PhoneNumber),1),t("td",null,a(e.Email),1),t("td",null,a(e.Diagnosis),1),t("td",null,a(e.Adress),1),t("td",null,[t("img",{src:e.Photo,width:"150px"},null,8,w)]),t("td",null,[t("button",{onClick:u=>l.viewPatient(e.id)},"Просмотреть",8,D),t("button",{onClick:u=>l.editPatient(e.id)},"Редактировать",8,S),t("button",{onClick:u=>l.deletePatient(e.id)},"Удалить",8,y)])]))),128))])]),t("div",I,[t("button",{onClick:s[3]||(s[3]=(...e)=>l.prevPage&&l.prevPage(...e)),disabled:r.currentPage===1,class:"btn"},"Предыдущая",8,B),t("button",{onClick:s[4]||(s[4]=(...e)=>l.nextPage&&l.nextPage(...e)),disabled:r.currentPage===l.pageCount,class:"btn"},"Следующая",8,N)])])}const V=h(p,[["render",F],["__scopeId","data-v-dbd2e873"]]);export{V as default};
